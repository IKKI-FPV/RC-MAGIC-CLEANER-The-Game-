<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
    <title>RC Magic Cleaner - Missione Pulizia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=VT323&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'VT323', monospace;
            background-color: #00205b;
            color: #00205b; 
            overflow: hidden;
        }
        * {
            -webkit-tap-highlight-color: transparent;
        }
        .game-container {
            border: 4px solid #ffffff;
            box-shadow: 0 0 25px rgba(255, 255, 255, 0.4), inset 0 0 20px rgba(0,0,0,0.5);
            background-color: #f0f0f0;
            transition: opacity 0.5s ease-in-out;
            border-radius: 20px;
        }
        #game-header {
            border-bottom: 4px solid #ce2b37;
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }
        .pixel-button {
            font-family: 'Press Start 2P', cursive;
            background-color: #0055d4;
            color: #ffffff;
            border: 4px solid #00205b;
            box-shadow: 4px 4px 0px #00205b;
            transition: all 0.1s ease-in-out;
            image-rendering: pixelated;
        }
        .pixel-button:hover, .pixel-button:focus {
            background-color: #2176ff;
            transform: translate(2px, 2px);
            box-shadow: 2px 2px 0px #00205b;
        }
        .pixel-button:active {
            transform: translate(4px, 4px);
            box-shadow: none;
        }
        .cta-button {
             background-color: #009246;
             border-color: #00632f;
             box-shadow: 4px 4px 0px #00632f;
        }
        .cta-button:hover, .cta-button:focus {
            background-color: #00ab52;
            box-shadow: 2px 2px 0px #00632f;
        }
        .scene-image { animation: bounce-in 0.5s ease; }
        .status-icons img { filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5)); }
        .dialogue-box { border: 4px solid #0055d4; background: rgba(255,255,255,0.6); }
        .hidden { display: none; }
        .fade-out { opacity: 0; }
        .correct-choice { animation: flash-green 0.6s ease-out; }
        .wrong-choice { animation: shake-red 0.6s ease-in-out; }
        #resellers-list { -webkit-overflow-scrolling: touch; }
        #resellers-list a { transition: all 0.2s ease; display: block; padding: 4px; border-radius: 5px; }
        #resellers-list a:hover { background-color: rgba(0, 85, 212, 0.1); color: #0055d4; }
        .star-animation { animation: pulse-star 1.5s infinite; display: inline-block; }

        @keyframes bounce-in { 0% { transform: scale(0.5); opacity: 0; } 70% { transform: scale(1.1); } 100% { transform: scale(1); opacity: 1; } }
        @keyframes flash-green { 0%, 100% { border-color: #ffffff; } 50% { border-color: #009246; box-shadow: 0 0 35px 15px rgba(0, 146, 70, 0.8), inset 0 0 20px rgba(0,0,0,0.5); } }
        @keyframes shake-red { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } 50% { border-color: #ce2b37; } }
        @keyframes pulse-star { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.7; } }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <audio id="background-music" loop preload="auto"></audio>

    <div id="game-container" class="game-container w-full max-w-2xl mx-auto rounded-lg p-6">
        
        <div id="game-header" class="text-center">
             <img id="logo-image" alt="RC Magic Cleaner Logo by IKKI SOLUTIONS" class="mx-auto h-20 object-contain">
        </div>

        <div id="start-screen">
            <div id="start-screen-image" class="text-center my-8"></div>
            <p class="text-center text-xl mb-4">Nome del Modellista:</p>
            <input type="text" id="player-name-input" class="w-full p-2 text-2xl text-center bg-gray-200 border-2 border-gray-400 rounded text-black placeholder-gray-500" placeholder="Top Driver">
            <button id="start-button" class="pixel-button w-full text-lg p-4 mt-6">Inizia a Pulire!</button>
        </div>

        <div id="main-game-screen" class="hidden">
            <div id="status-bar" class="flex justify-between items-center mb-4 p-2 border-b-4 border-gray-300">
                <h2 id="player-name-display" class="text-2xl"></h2>
                <div id="cans-container" class="flex gap-2 status-icons"></div>
            </div>
            <div id="scene-image" class="scene-image text-center my-6 h-32 flex items-center justify-center"></div>
            <div id="dialogue-box" class="dialogue-box p-4 rounded-md min-h-[100px] text-xl">
                <p id="dialogue-text"></p>
            </div>
            <div id="options-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6"></div>
        </div>
        
        <div id="game-over-screen" class="hidden text-center">
            <h1 id="game-over-title" class="text-5xl mb-6 text-blue-800" style="font-family: 'Press Start 2P'"></h1>
            <div id="victory-image" class="hidden my-6"></div>
            <p id="game-over-text" class="text-2xl mb-8"></p>
            <button id="restart-button" class="pixel-button w-full text-lg p-4">Ricomincia Missione</button>
            <button id="cta-button" class="pixel-button cta-button w-full text-lg p-4 mt-4 hidden">Acquista RC Magic Cleaner!</button>
        </div>

        <div id="resellers-screen" class="hidden text-left">
            <h2 class="text-3xl text-center mb-4">
                <span class="star-animation">⭐</span> I nostri rivenditori <span class="star-animation">⭐</span>
            </h2>
            <div id="resellers-list" class="text-lg mb-6 max-h-48 overflow-y-auto pr-2"></div>
            <div class="grid md:grid-cols-2 gap-4 text-sm border-t-2 border-gray-300 pt-4">
                <div>
                    <h3 class="font-bold text-lg text-blue-800">Descrizione</h3>
                    <p class="mb-2">Creato dalla passione per il modellismo, ideale per la pulizia di tutti i modelli radiocomandati. Rimuove con facilità ogni tipo di sporco, come polvere, fango/terra ed erba grazie alla schiuma attiva. Perfetto su materiali stampati in 3D come ABS, PLA, PETG, radiocomandi, action cam e tutte le lenti per FPV.</p>
                    <p>Non unge e non lascia aloni, le tue plastiche, carbonio o metalli, torneranno a risplendere. La formula specifica è stata studiata per non intaccare i motori e le parti elettriche (non alimentate durante l’uso). Non crea ossido, non lascia residui ed evapora in tempi brevi. Respinge lo sporco e la polvere.</p>
                    <h4 class="font-bold mt-2 text-red-700">Avvertenze d'uso:</h4>
                    <p>Rimuovere la batteria. Agitare bene e spruzzare da 10cm. Attendere la totale evaporazione prima di ricollegare le batterie. Non usare su motore caldo. Dopo l’applicazione, tamponare con un panno asciutto. Per un miglior risultato usare una spazzola e aria compressa.</p>
                </div>
                <div>
                    <h3 class="font-bold text-lg text-blue-800">Description (EN)</h3>
                    <p class="mb-2">Created from the passion for model making, ideal for cleaning all remote control models. Easily removes all types of dirt, such as dust, mud / earth and grass, thanks to the active foam. Perfect for 3D printed materials such as ABS, PLA, PETG, remote controls, action cameras and all kinds of lenses for FPV.</p>
                    <p>It is not greasy and does not leave streaks. Your plastic, carbon or metal materials will shine again. The specific formula has been designed to avoid any damage to the motors and any electrical parts (which must not be powered during use). It does not create oxide, leaves no residues and evaporates quickly. It repels dirt and dust.</p>
                     <h4 class="font-bold mt-2 text-red-700">Usage warnings:</h4>
                     <p>Remove the battery before and during cleaning. Shake well and spray at a distance of at least 10cm. Wait for complete evaporation before reconnecting batteries. Do not use on a hot engine. After application, dab with a dry cloth. For best results we recommend a brush and an air compressor.</p>
                </div>
            </div>
             <button id="back-to-start-button" class="pixel-button w-full text-lg p-4 mt-6">Gioca Ancora</button>
        </div>
        
    </div>

    <script>
        // --- Link alle risorse su GitHub ---
        const assets = {
            logo: "https://raw.githubusercontent.com/IKKI-FPV/RC-MAGIC-CLEANER-The-Game-/main/RC%20MAGIC%20CLEANER%20LOGO%20TRASPARENTE.png",
            can: "https://raw.githubusercontent.com/IKKI-FPV/RC-MAGIC-CLEANER-The-Game-/main/rc-magic-cleaner%20200ml%20trasparente%201.png",
            music: "https://raw.githubusercontent.com/IKKI-FPV/RC-MAGIC-CLEANER-The-Game-/main/scummvm.ogg"
        };

        // --- Elementi del DOM ---
        const startScreen = document.getElementById('start-screen');
        const mainGameScreen = document.getElementById('main-game-screen');
        const gameOverScreen = document.getElementById('game-over-screen');
        const resellersScreen = document.getElementById('resellers-screen');
        const gameContainer = document.getElementById('game-container');
        const startScreenImage = document.getElementById('start-screen-image');
        const victoryImage = document.getElementById('victory-image');
        const ctaButton = document.getElementById('cta-button');
        const resellersList = document.getElementById('resellers-list');
        const backToStartButton = document.getElementById('back-to-start-button');
        const backgroundMusic = document.getElementById('background-music');
        const logoImage = document.getElementById('logo-image');

        const playerNameInput = document.getElementById('player-name-input');
        const startButton = document.getElementById('start-button');
        const restartButton = document.getElementById('restart-button');
        
        const playerNameDisplay = document.getElementById('player-name-display');
        const cansContainer = document.getElementById('cans-container');
        const sceneImage = document.getElementById('scene-image');
        const dialogueText = document.getElementById('dialogue-text');
        const optionsContainer = document.getElementById('options-container');
        const gameOverTitle = document.getElementById('game-over-title');
        const gameOverText = document.getElementById('game-over-text');

        // --- Inizializzazione Risorse ---
        logoImage.src = assets.logo;
        backgroundMusic.src = assets.music;
        const productCanImageURL = assets.can;
        startScreenImage.innerHTML = `<img src="${productCanImageURL}" alt="RC Magic Cleaner" class="mx-auto h-40 object-contain">`;

        // --- Motore Audio (per SFX) ---
        let audioCtx;
        let isAudioInitialized = false;

        function initAudio() { 
            if (isAudioInitialized) return;
            audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            isAudioInitialized = true;
        }

        function playNote(frequency, duration, type = 'sine', volume = 0.1) {
            if (!audioCtx || audioCtx.state === 'suspended') return;
            
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.type = type;
            osc.frequency.setValueAtTime(frequency, audioCtx.currentTime);
            gain.gain.setValueAtTime(volume, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + duration / 1000);
            osc.start();
            osc.stop(audioCtx.currentTime + duration / 1000);
        }
        const sounds = {
            typing: () => playNote(1500, 50, 'square'),
            success: () => { playNote(523, 80, 'square'); setTimeout(() => playNote(659, 80, 'square'), 90); setTimeout(() => playNote(784, 150, 'square'), 180); },
            failure: () => { playNote(220, 200, 'sawtooth'); setTimeout(() => playNote(164, 400, 'sawtooth'), 210); },
            intro: () => { playNote(392, 100, 'triangle'); setTimeout(() => playNote(523, 100, 'triangle'), 120); setTimeout(() => playNote(659, 250, 'triangle'), 240); },
            victory: () => { let d=0; [523,587,659,698,784,880,1046].forEach((n,i,a) => { setTimeout(() => playNote(n, i===a.length-1?400:100, 'sawtooth'), d); d+=110; }); }
        };

        // --- Stato del Gioco ---
        let gameState = { playerName: '', cans: 3, currentScene: 'intro' };

        // --- Dati ---
        const resellers = [
            { url: 'https://www.costruzionedroni.it/rc-magic-cleaner', name: 'costruzionedroni.it' },
            { url: 'https://drone24hours.com/products/rc-magic-cleaner-200ml', name: 'drone24hours.com' },
            { url: 'https://www.farinsframes.com/rc-magic-cleaner-detergente-pulitore-per-modellismo-rc/', name: 'farinsframes.com' },
            { url: 'https://www.personaldrones.it/prodotti/fpv/componenti-extra-e-accessori/21983-rc-magic-cleaner', name: 'personaldrones.it' },
            { url: 'https://rhobbyfpv.it/prodotto/rc-magic-cleaner-200ml-pulitore-per-droni-fpv/', name: 'rhobbyfpv.it' },
            { url: 'https://finzfpv.com/product/rc-magic-cleaner/', name: 'finzfpv.com' },
            { url: 'https://www.dronedesigninternational.com/ddi-shop/rc-magic-cleaner-200ml/', name: 'dronedesigninternational.com' },
            { url: 'https://www.sonicfpv.it/prodotto/rc-magic-cleaner-200ml/', name: 'sonicfpv.it' },
            { url: 'https://www.rcnitroshop.it/product/rc-magic-cleaner-150ml/', name: 'rcnitroshop.it' },
            { url: 'https://dm-3dracing.com/products/rc-magic-cleaner-150-ml', name: 'dm-3dracing.com' },
            { url: 'https://www.hobbypoint.shop/km-rc-magic-cleaner-p-13274.html', name: 'hobbypoint.shop' },
            { url: 'https://dpmodellismo.it/products/rc-magic-cleaner-200ml-pulizia-modellismo', name: 'dpmodellismo.it' },
            { url: 'https://www.aerial-shop.com/en/glues-liquid-tape/2428-nettoyant-drone-rc-magic-cleaner.html', name: 'aerial-shop.com 🇨🇵' },
            { url: 'https://www.lacameraembarquee.fr/outillage-fpv/14678-nettoyant-rc-magic-cleaner.html', name: 'lacameraembarquee.fr 🇨🇵' },
            { url: 'https://www.whoopstore.uk/product/rc-magic-cleaner', name: 'whoopstore.uk 🇬🇧' },
            { url: 'https://droneshop.nl/rc-magic-cleaner-200ml', name: 'droneshop.nl 🇳🇱' },
            { url: 'https://billorfpv.com/producto/magic-cleaner-rc', name: 'billorfpv.com 🇪🇦' }
        ];
        
        const SVGs = {
            carDirty: `<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24"><path fill="#795548" d="M2.37 13.45l2.45-2.45a2.5 2.5 0 013.54 0l1.41 1.41L18 4l4 4-8.88 8.88-1.41-1.41a2.5 2.5 0 00-3.54 0L5.82 18.22a2.5 2.5 0 01-3.54-3.54L4.73 12H3a1 1 0 110-2h1.73l-2.45-2.45a2.5 2.5 0 010-3.54 2.5 2.5 0 013.54 0l2.45 2.45V4a1 1 0 112 0v1.73l2.45-2.45a2.5 2.5 0 013.54 0l1.41 1.41L22 1l-1 1-5.27 5.27-1.41-1.41a2.5 2.5 0 00-3.54 0L8.33 8.32a2.5 2.5 0 01-3.54 0l-2.45-2.45a2.5 2.5 0 010-3.54 2.5 2.5 0 013.54 0l2.45 2.45h2.83l-2.45-2.45a2.5 2.5 0 010-3.54z"/><path fill="#e0e0e0" d="M18.36 9.09l-12.72 12.72a1 1 0 01-1.42 0l-1.41-1.41a1 1 0 010-1.42L15.53 6.27l2.83 2.82z"/><path fill="#bdbdbd" d="M5.64 21.81l12.72-12.72-2.83-2.82L2.81 19l2.83 2.81z"/><circle cx="7" cy="17" r="3" fill="#424242"/><circle cx="17" cy="7" r="3" fill="#424242"/></svg>`,
            engineGreasy: `<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24"><rect width="16" height="16" x="4" y="4" fill="#616161" rx="2"/><path fill="#795548" d="M7 7h10v10H7zm2 2h6v6H9z"/><path fill="#424242" d="M6 2h12v2H6zm0 18h12v2H6zm-4-6v-4h2v4zm18 0v-4h2v4z"/></svg>`,
            wheelsDirty: `<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24"><circle cx="12" cy="12" r="8" fill="#424242"/><circle cx="12" cy="12" r="3" fill="#757575"/><path fill="#795548" d="M12 2a10 10 0 00-10 10 10 10 0 0010 10 10 10 0 0010-10 10 10 0 00-10-10zm0 18a8 8 0 01-8-8 8 8 0 018-8 8 8 0 018 8 8 8 0 01-8 8z"/></svg>`,
            carClean: `<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 24 24"><path fill="#ce2b37" d="M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8a1 1 0 001 1h1a1 1 0 001-1v-1h12v1a1 1 0 001 1h1a1 1 0 001-1v-8l-2.08-5.99zM6.5 16a1.5 1.5 0 110-3 1.5 1.5 0 010 3zm11 0a1.5 1.5 0 110-3 1.5 1.5 0 010 3zM5 11l1.5-4.5h11L19 11H5z"/><path fill="#a6222b" d="M19 11l-1.5 4.5h-11L5 11h14z"/></svg>`
        };

        const scenes = {
            intro: { image: SVGs.carDirty, dialogue: (name) => `Ciao ${name}! Il tuo modello è coperto di fango dopo l'ultima uscita. È ora di farlo tornare a brillare con RC MAGIC CLEANER!`, options: [{ text: 'Accetto la sfida!', nextScene: 'mud' }] },
            mud: { image: SVGs.carDirty, dialogue: () => 'Uno strato di fango secco copre tutta la carrozzeria. Qual è il primo passo?', options: [ { text: 'Uso un panno asciutto', outcome: 'failure', message: 'Pessima idea! Il fango secco graffia la vernice. Bomboletta sprecata per riparare!' }, { text: 'Spruzzo subito il Cleaner', outcome: 'failure', message: 'Efficace, ma uno spreco! Togliere il grosso prima fa risparmiare prodotto.' }, { text: 'Risciacquo con acqua', outcome: 'success', nextScene: 'grease' } ] },
            grease: { image: SVGs.engineGreasy, dialogue: () => 'Tolto il fango, noti che il motore e la trasmissione sono incrostati di grasso oleoso.', options: [ { text: 'Spruzzo RC MAGIC CLEANER', outcome: 'success', nextScene: 'details' }, { text: 'Uso acqua e sapone', outcome: 'failure', message: 'L\'acqua non scioglie il grasso e rischi di danneggiare l\'elettronica!' }, { text: 'Raschio con un cacciavite', outcome: 'failure', message: 'Danneggi le parti! Il modellismo richiede delicatezza... e il prodotto giusto.' } ] },
            details: { image: SVGs.wheelsDirty, dialogue: () => 'Il grosso è fatto! Ora mancano i dettagli: ruote, braccetti e telaio da far brillare.', options: [ { text: 'Lascio così, va bene', outcome: 'failure', message: 'Un vero modellista non si accontenta! La perfezione è nei dettagli.' }, { text: 'Cleaner su un panno', outcome: 'success', nextScene: 'end' } ] },
            end: { image: SVGs.carClean, isVictory: true, dialogue: (name) => `Missione compiuta, ${name}! Il tuo modello è perfetto, pulito e brillante. Sembra nuovo grazie a RC MAGIC CLEANER!`, options: [] }
        };

        // --- Funzioni di Logica ---
        function typeWriter(text, element, onComplete) { let i = 0; element.innerHTML = ''; function type() { if (i < text.length) { element.innerHTML += text.charAt(i); if (text.charAt(i).trim()!=='') sounds.typing(); i++; setTimeout(type, 40); } else if (onComplete) { onComplete(); } } type(); }
        function updateStatus() { 
            playerNameDisplay.textContent = gameState.playerName; 
            cansContainer.innerHTML = ''; 
            for (let i = 0; i < gameState.cans; i++) { 
                const can = document.createElement('span'); 
                can.innerHTML = `<img src="${productCanImageURL}" alt="Bomboletta" class="h-12 object-contain">`; 
                cansContainer.appendChild(can); 
            } 
        }
        function renderScene(sceneId) {
            const scene = scenes[sceneId];
            if (!scene) return;
            gameState.currentScene = sceneId;
            sceneImage.innerHTML = scene.image;
            sceneImage.style.animation = 'none'; sceneImage.offsetHeight; sceneImage.style.animation = 'bounce-in 0.5s ease';
            optionsContainer.innerHTML = '';
            typeWriter(scene.dialogue(gameState.playerName), dialogueText, () => {
                if (scene.isVictory) { setTimeout(() => showGameOver(true), 2000); }
                scene.options.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option.text;
                    button.classList.add('pixel-button', 'p-3', 'text-md');
                    button.onclick = () => handleOptionClick(option);
                    optionsContainer.appendChild(button);
                });
            });
            updateStatus();
        }
        function triggerAnimation(animationClass) { gameContainer.classList.add(animationClass); setTimeout(() => { gameContainer.classList.remove(animationClass); }, 600); }
        function handleOptionClick(option) {
            optionsContainer.innerHTML = '';
            if (option.outcome === 'success') { sounds.success(); triggerAnimation('correct-choice'); setTimeout(() => renderScene(option.nextScene), 500); }
            else if (option.outcome === 'failure') {
                sounds.failure(); triggerAnimation('wrong-choice'); gameState.cans--; updateStatus();
                typeWriter(option.message, dialogueText, () => {
                    if (gameState.cans <= 0) { setTimeout(() => showGameOver(false), 1500); }
                    else { setTimeout(() => renderScene(gameState.currentScene), 2000); }
                });
            } else { renderScene(option.nextScene); }
        }
        function showGameOver(isVictory) {
            backgroundMusic.pause();
            gameContainer.classList.add('fade-out');
            setTimeout(() => {
                mainGameScreen.classList.add('hidden');
                resellersScreen.classList.add('hidden');
                gameOverScreen.classList.remove('hidden');
                victoryImage.classList.add('hidden'); ctaButton.classList.add('hidden');
                if (isVictory) {
                    sounds.victory(); gameOverTitle.textContent = "Modello Perfetto!"; gameOverText.textContent = "Missione compiuta!";
                    victoryImage.innerHTML = SVGs.carClean; victoryImage.classList.remove('hidden'); ctaButton.classList.remove('hidden');
                } else {
                    gameOverTitle.textContent = "Game Over"; gameOverText.textContent = "Hai finito le bombolette!";
                }
                gameContainer.classList.remove('fade-out');
            }, 500);
        }
        function startGame() {
            if (!isAudioInitialized) {
                initAudio();
            }
            if (audioCtx.state === 'suspended') {
                 audioCtx.resume();
            }
            backgroundMusic.currentTime = 0;
            backgroundMusic.play().catch(e => console.error("La riproduzione automatica della musica è stata bloccata dal browser.", e));
            
            const name = playerNameInput.value.trim();
            if (!name) { playerNameInput.style.borderColor = '#ce2b37'; setTimeout(() => { playerNameInput.style.borderColor = ''; }, 500); return; }
            gameState.playerName = name; gameState.cans = 3; gameState.currentScene = 'intro';
            sounds.intro();
            gameContainer.classList.add('fade-out');
            setTimeout(() => {
                startScreen.classList.add('hidden'); gameOverScreen.classList.add('hidden'); mainGameScreen.classList.remove('hidden');
                renderScene('intro');
                gameContainer.classList.remove('fade-out');
            }, 500);
        }
        function showResellers() {
             gameContainer.classList.add('fade-out');
             setTimeout(() => {
                gameOverScreen.classList.add('hidden');
                resellersScreen.classList.remove('hidden');
                
                resellersList.innerHTML = '';
                let delay = 0;
                resellers.forEach(reseller => {
                    const li = document.createElement('a');
                    li.href = reseller.url;
                    li.target = '_blank';
                    li.textContent = reseller.name;
                    li.style.opacity = '0';
                    li.style.transition = 'opacity 0.5s ease';
                    resellersList.appendChild(li);
                    setTimeout(() => {
                        li.style.opacity = '1';
                    }, delay);
                    delay += 100;
                });

                gameContainer.classList.remove('fade-out');
             }, 500);
        }
        function resetToStart() {
             backgroundMusic.pause();
             backgroundMusic.currentTime = 0;
             gameContainer.classList.add('fade-out');
             setTimeout(() => {
                gameOverScreen.classList.add('hidden');
                resellersScreen.classList.add('hidden');
                startScreen.classList.remove('hidden');
                playerNameInput.value = gameState.playerName;
                gameContainer.classList.remove('fade-out');
            }, 500);
        }

        // --- Event Listeners ---
        startButton.addEventListener('click', startGame);
        playerNameInput.addEventListener('keyup', (event) => { if (event.key === 'Enter') startGame(); });
        restartButton.addEventListener('click', resetToStart);
        backToStartButton.addEventListener('click', resetToStart);
        ctaButton.addEventListener('click', showResellers);
        
    </script>
</body>
</html>

